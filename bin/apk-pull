#!/usr/bin/env python3

import argparse
from subprocess import run


def main():
    parser = argparse.ArgumentParser()
    parser.add_argument("package")
    args, unknown_args = parser.parse_known_args()

    p = run(["adb"] + unknown_args + ["shell", "pm", "path", args.package], check=True, capture_output=True, text=True)
    for line in p.stdout.strip().split("\n"):
        path = line.removeprefix("package:")
        run(["adb"] + unknown_args + ["pull", path], check=True)

if __name__ == "__main__":
    main()
